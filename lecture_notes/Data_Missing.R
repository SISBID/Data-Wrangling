## ---- include = FALSE--------------------------------------------------------------------------
library(knitr)
library(tidyverse)
opts_chunk$set(comment = "")


## ----------------------------------------------------------------------------------------------
x = c(0, NA, 2, 3, 4)
x > 2


## ----------------------------------------------------------------------------------------------
x + 2
x * 2


## ----------------------------------------------------------------------------------------------
sum(c(1,2,3,NA))
mean(c(1,2,3,NA))
median(c(1,2,3,NA))


## ----------------------------------------------------------------------------------------------
x <- c(TRUE, TRUE, TRUE, TRUE, FALSE, NA)
sum(x)
sum(x, na.rm = TRUE)


## ----------------------------------------------------------------------------------------------
test <- c(0,NA, -1)
test/0
test <- test/0
is.na(test)
is.nan(test)
is.infinite(test)


## ----------------------------------------------------------------------------------------------
A <- c(1, 2, 3, NA)
B <- c(1, 2, 3, 4)
any(is.na(A)) # are there any NAs - YES/TRUE
any(is.na(B)) # are there any NAs- NO/FALSE


## ----isna--------------------------------------------------------------------------------------
A <- c(1, 2, 3, NA)
B <- c(1, 2, 3, 4)
all(is.na(A)) # are there any NAs - YES/TRUE
all(is.na(B)) # are there any NAs- NO/FALSE


## ---- message=FALSE----------------------------------------------------------------------------
library(readr)
bike <-read_csv("https://sisbid.github.io/Data-Wrangling/labs/Bike_Lanes.csv")
count(bike, subType)


## ---- error=FALSE------------------------------------------------------------------------------
#install.packages("naniar")
library(naniar)


## ---- message=FALSE----------------------------------------------------------------------------
?airquality # use this to find out more about the data


## ----------------------------------------------------------------------------------------------
pct_complete(airquality)


## ----------------------------------------------------------------------------------------------
airquality %>% select(Ozone) %>%
pct_complete()


## ----------------------------------------------------------------------------------------------
miss_var_summary(airquality)


## ----------------------------------------------------------------------------------------------
miss_case_summary(airquality)


## ---- fig.height=4, warning=FALSE, fig.align='center'------------------------------------------
gg_miss_var(airquality)


## ----------------------------------------------------------------------------------------------
airquality %>% filter(Ozone < 5)


## ----------------------------------------------------------------------------------------------
airquality %>% filter(Ozone < 5 | is.na(Ozone))


## ----------------------------------------------------------------------------------------------
dim(airquality)
airquality %>% drop_na(Ozone)


## ----------------------------------------------------------------------------------------------
airquality %>% drop_na()


## ----------------------------------------------------------------------------------------------
miss_var_which(airquality) # which columns have missing values


## ----------------------------------------------------------------------------------------------
airquality %>% select(!miss_var_which(airquality))


## ---- message=FALSE----------------------------------------------------------------------------
library(readr)
bike <-read_csv("https://sisbid.github.io/Data-Wrangling/labs/Bike_Lanes.csv")
count(bike, dateInstalled)


## ----------------------------------------------------------------------------------------------
bike <- bike %>% 
  mutate(dateInstalled = na_if(dateInstalled, 0))
count(bike, dateInstalled)


## ----------------------------------------------------------------------------------------------
bike %>% 
  mutate(dateInstalled = replace_na(dateInstalled, 2005)) %>% 
  count(dateInstalled)


## ----------------------------------------------------------------------------------------------
count(bike, dateInstalled) %>% mutate(percent = (n/(sum(n)) *100))


## ----------------------------------------------------------------------------------------------
bike %>% drop_na(dateInstalled) %>% 
  count(dateInstalled) %>% mutate(percent = (n/(sum(n)) *100))

