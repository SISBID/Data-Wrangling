## ---- include=FALSE------------------------------------------------------------------------------------------------------------------
library(tidyverse)
library(httr)
library(jsonlite)
library(googlesheets4)


## ----eval=FALSE----------------------------------------------------------------------------------------------------------------------
gs4_auth()


## ------------------------------------------------------------------------------------------------------------------------------------
sheet_url <- "https://docs.google.com/spreadsheets/d/1KIRtcPVn58R3_qr97WNtcOJiY4AaytHzGDzLW_3_R1s/edit?usp=sharing"


## ------------------------------------------------------------------------------------------------------------------------------------
x <- read_sheet(sheet_url)


## ------------------------------------------------------------------------------------------------------------------------------------
sheet_names(sheet_url)


## ------------------------------------------------------------------------------------------------------------------------------------
read_sheet(sheet_url, range =  cell_cols("A:B"))


## ------------------------------------------------------------------------------------------------------------------------------------
jsonData <- fromJSON("https://think.cs.vt.edu/corgis/datasets/json/airlines/airlines.json")


## ---- error = TRUE-------------------------------------------------------------------------------------------------------------------
str(jsonData)


## ------------------------------------------------------------------------------------------------------------------------------------
lga_ord <- jsonData %>% 
  filter(Airport$Code %in% c("LGA", "ORD") & Time$Year == 2016)


## ------------------------------------------------------------------------------------------------------------------------------------
airport_list <- list(
  airport_code = lga_ord$Airport$Code,
  total_flights = lga_ord$Statistics$Flights$Total,
  delayed_proportion = lga_ord$Statistics$Flights$Delayed / lga_ord$Statistics$Flights$Total
  )
airport_compare <- as_tibble(airport_list)
airport_compare

